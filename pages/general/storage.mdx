## Storage Usage Commands

| Syntax        | Description                       |
| -----------   | -----------                       |
| `df -h`       | mount file usage and availability |
| `ncdu`        | storage usage visualization       |

Sorted biggest 10 file in the current dir sub-system.

``` bash
du -ah . | sort -n -r | head -n 10
```

Sorted biggest 10 dirs of one dir below current dir sub-system.

``` bash
du -h . --max-depth=2 | sort -n -r | head -n 10
```

## Unlinked File Storage Hogging

Display pid of resources that processes are holding onto even if the origin is deleted.

``` bash
lsof | grep deleted | awk '{print $2}'
```

Applications using unlinked files can be printed using `lsof +L1`.

Removing those files using their ids and killing the processes holding them.

``` bash
# Extract the processes
lsof | grep deleted | awk '{print $2}' > ids

#!/bin/bash
input="./ids"
while IFS= read -r line
do
  kill -9 "$line"
done < "$input"
```

## Recursive File Delete

To delete a specific file recursively from current directory and all sub directories

``` bash
find . -name "*.bak" -type f -delete

# run this first just to be safe
# it will list all files to be deleted
find . -name "*.bak" -type f
```

Make sure that `-delete` is the last argument of the command. If you put it before the `-name *.bak` argument, it will __delete everything__.

## Site Permissions

Site permissions when popping up a new site.

```bash
sudo chown -R www-data:www-data loc/
sudo chmod -R 774 loc/
```

## Manual Fonts

For a single user place fonts in:

```sh
~/.local/share/fonts
```

For system-wide fonts place them in:

```sh
/usr/local/share/fonts

# don't touch this
# it's only for pacman
/usr/share/fonts/
```

[Source](https://wiki.archlinux.org/title/Fonts#Manual_installation)

## Tar

Compress a file into zst. You need `zstd` installed.

```bash
tar acf files.tar.zst files/
```

Decompress a file from zst

```bash
tar axf files.tar.zst
```

## Specific Sized Files

Create a file with a specific size. Write the size as `5M` or `10G`.

```bash
truncate -s <size> <file.txt>
```



## Binary Executables

To run binary executables from the terminal without having to specify the full path, you can add the directory containing the executable to the `PATH` environment variable. This can be done mainly in two ways.

First by adding the path of the executable into your respective shell's config file. 

``` bash
# bash
echo "export PATH=$PATH:/path/to/executable" >> ~/.bashrc

# fish
echo "set -gx PATH $PATH /path/to/executable" >> ~/.config/fish/config.fish
```

Second by moving the executable into a directory that is already in the `PATH` variable. Like `/usr/local/bin`. This is the recommended way. 

``` bash
sudo mv /path/to/executable /usr/local/bin
```